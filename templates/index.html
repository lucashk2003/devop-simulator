<!DOCTYPE html>
<html>
<head>
    <title>Simulador DevOps CI/CD</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container mt-5">
    <h1 class="text-center mb-4">Simulador DevOps CI/CD</h1>
    <div class="row">
        <div class="col-md-8">
            <div class="card">
                <div class="card-header"><h3>Configurar Simulación</h3></div>
                <div class="card-body">
                    <form action="/simulate" method="post">
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label>Desarrolladores</label>
                                <input type="number" name="developers" class="form-control" value="4" min="1" max="10">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label>Testers</label>
                                <input type="number" name="testers" class="form-control" value="2" min="0" max="10">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label>Días por Sprint</label>
                                <input type="number" name="sprint_days" class="form-control" value="14" min="5" max="30">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label>Tareas por Sprint</label>
                                <input type="number" name="tasks_per_sprint" class="form-control" value="20" min="5" max="50">
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label>% Automatización CI/CD</label>
                                <input type="range" name="automation" class="form-range" min="0" max="100" value="70">
                                <span id="auto-value">70%</span>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label>% Probabilidad de Bugs</label>
                                <input type="range" name="bugs" class="form-range" min="0" max="50" value="20">
                                <span id="bug-value">20%</span>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label>Cantidad de Sprints a simular</label>
                            <input type="number" name="sprints" class="form-control" value="10" min="5" max="50">
                        </div>
                        <button type="submit" class="btn btn-primary btn-lg">Ejecutar Simulación</button>
                    </form>
                </div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="card">
                <div class="card-header">Últimas simulaciones</div>
                <div class="card-body">
					{% for sim in simulations %}
						<a href="{{ url_for('results', sim_id=sim.id) }}" class="btn btn-outline-secondary btn-sm d-block mb-2">
							{{ sim.timestamp[:16] }} - {{ sim.params['num_developers'] }} devs, {{ (sim.params['automation_level'] * 100)|int }}% auto
						</a>
					{% endfor %}
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.querySelector('[name=automation]').oninput = e => document.getElementById('auto-value').textContent = e.target.value + '%'
document.querySelector('[name=bugs]').oninput = e => document.getElementById('bug-value').textContent = e.target.value + '%'
</script>
</body>
</html>